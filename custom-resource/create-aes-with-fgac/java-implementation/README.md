# Amazon Elasticsearch Service Custom Resource with Fine-Grained Access Control

This Gradle project contains Java source code to implement an AWS Lambda function for the following features:
- receive CloudFormation custom resource request for
    - Amazon Elasticsearch domain creation with fine-grained access control;
    - Amazon Elasticsearch domain update;
    - Amazon Elasticsearch domain deletion.
- send CloudFormation custom resource response.

# Build
```
./gradlew clean
./gradlew build
```

# Artifact
After successful build, there is a zip file in ./build/distributions directory (for example, `ElasticsearchFineGrainedAccess-1.0.zip`) for CloudFormation custom resource to use. 

# References:
- https://docs.aws.amazon.com/lambda/latest/dg/services-cloudformation.html
- https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/es-configuration-samples.html
- https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-lambda-function-code-cfnresponsemodule.html
- https://hub.alfresco.com/t5/alfresco-platform-services-blog/how-a-lambda-backed-custom-resource-saved-the-day/ba-p/286986
- https://stackoverflow.com/questions/32811947/how-do-we-access-and-respond-to-cloudformation-custom-resources-using-an-aws-lam

# log info
**CloudWatch Logs Insights**  
region: us-east-1  
log-group-names: /aws/lambda/Valentine-AES-PUBLIC-FGAC-CustomElasticsearchDomai-11OHX7UV4M2YC  
start-time: -3600s  
end-time: 0s  
query-string:
```
filter @logStream = '2020/06/17/[$LATEST]ab60579b2c6e491ab42f4ecfca3bf5d0'
 | fields @timestamp, @message
```
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|       @timestamp        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              @message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 2020-06-17 23:51:43.685 | Jun 17, 2020 11:51:43 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:51:43.685 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:51:13.544 | Jun 17, 2020 11:51:13 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:51:13.544 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:50:43.354 | Jun 17, 2020 11:50:43 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:50:43.354 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:50:13.236 | Jun 17, 2020 11:50:13 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:50:13.236 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:49:43.128 | Jun 17, 2020 11:49:43 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:49:43.128 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:49:13.004 | Jun 17, 2020 11:49:13 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:49:13.004 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:48:42.854 | Jun 17, 2020 11:48:42 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:48:42.854 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:48:12.749 | Jun 17, 2020 11:48:12 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:48:12.749 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:47:42.582 | Jun 17, 2020 11:47:42 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:47:42.582 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:47:12.454 | Jun 17, 2020 11:47:12 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:47:12.454 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:46:42.336 | Jun 17, 2020 11:46:42 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:46:42.336 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:46:12.223 | Jun 17, 2020 11:46:12 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:46:12.223 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:45:42.073 | Jun 17, 2020 11:45:42 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:45:42.073 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:45:11.938 | Jun 17, 2020 11:45:11 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:45:11.938 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:44:41.803 | Jun 17, 2020 11:44:41 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:44:41.803 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:44:11.683 | Jun 17, 2020 11:44:11 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:44:11.683 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:43:41.462 | Jun 17, 2020 11:43:41 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:43:41.462 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:43:11.305 | Jun 17, 2020 11:43:11 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:43:11.305 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:42:41.150 | Jun 17, 2020 11:42:41 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:42:41.150 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:42:10.907 | Jun 17, 2020 11:42:10 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:42:10.907 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:41:40.778 | Jun 17, 2020 11:41:40 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:41:40.778 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:41:10.612 | Jun 17, 2020 11:41:10 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:41:10.612 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:40:40.442 | Jun 17, 2020 11:40:40 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:40:40.442 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:40:10.194 | Jun 17, 2020 11:40:10 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:40:10.194 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:39:39.969 | Jun 17, 2020 11:39:39 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC waitForDomainProcessing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:39:39.969 | INFO: Domain [val-aes-public-fgac] still processing...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2020-06-17 23:39:39.881 | Jun 17, 2020 11:39:39 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC createDomain                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 2020-06-17 23:39:39.881 | INFO: Domain creation response from Amazon Elasticsearch Service: {DomainStatus: {DomainId: 022336407076/val-aes-public-fgac,DomainName: val-aes-public-fgac,ARN: arn:aws:es:us-east-1:022336407076:domain/val-aes-public-fgac,Created: true,Deleted: false,Processing: true,UpgradeProcessing: false,ElasticsearchVersion: 7.4,ElasticsearchClusterConfig: {InstanceType: r5.large.elasticsearch,InstanceCount: 3,DedicatedMasterEnabled: true,ZoneAwarenessEnabled: true,ZoneAwarenessConfig: {AvailabilityZoneCount: 3},DedicatedMasterType: r5.large.elasticsearch,DedicatedMasterCount: 3,WarmEnabled: false,},EBSOptions: {EBSEnabled: true,VolumeType: gp2,VolumeSize: 20,},AccessPolicies: {"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"AWS":"*"},"Action":"es:*","Resource":"*"}]},SnapshotOptions: {AutomatedSnapshotStartHour: 0},CognitoOptions: {Enabled: false,},EncryptionAtRestOptions: {Enabled: true,KmsKeyId: arn:aws:kms:us-east-1:022336407076:key/3124bfd0-be4d-4c65-8903-ae409cf4a159},NodeToNodeEncryptionOptions: {Enabled: true},AdvancedOptions: {rest.action.multi.allow_explicit_index=true},ServiceSoftwareOptions: {CurrentVersion: ,NewVersion: ,UpdateAvailable: false,Cancellable: false,UpdateStatus: COMPLETED,Description: There is no software update available for this domain.,AutomatedUpdateDate: Thu Jan 01 00:00:00 UTC 1970,OptionalDeployment: true},DomainEndpointOptions: {EnforceHTTPS: true,TLSSecurityPolicy: Policy-Min-TLS-1-2-2019-07},AdvancedSecurityOptions: {Enabled: true,InternalUserDatabaseEnabled: true}}}  |
| 2020-06-17 23:39:33.921 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC createDomain                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 2020-06-17 23:39:33.921 | INFO: Sending domain creation request...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 2020-06-17 23:39:33.863 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.863 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.862 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.862 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.862 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.862 | INFO: Create Option - "AVAILABILITY_ZONE_COUNT"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2020-06-17 23:39:33.861 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.861 | INFO: Create Option - "MASTER_USER_PASSWORD"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2020-06-17 23:39:33.824 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.824 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.823 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.823 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.823 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.823 | INFO: Create Option - "MASTER_USER_NAME"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 2020-06-17 23:39:33.822 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.822 | INFO: Create Option - "EBS_VOLUME_SIZE"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2020-06-17 23:39:33.821 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.821 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.785 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.785 | INFO: Create Option - "DATA_INSTANCE_TYPE"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 2020-06-17 23:39:33.784 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.784 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.783 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.783 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.783 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.783 | INFO: Create Option - "DATA_NODE_COUNT"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2020-06-17 23:39:33.781 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.781 | INFO: Create Option - "MASTER_INSTANCE_TYPE"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2020-06-17 23:39:33.724 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.724 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.723 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.723 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.723 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.723 | INFO: Create Option - "MASTER_NODE_COUNT"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 2020-06-17 23:39:33.722 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.722 | INFO: Create Option - "ELASTICSEARCH_VERSION"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2020-06-17 23:39:33.685 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.685 | INFO: isValid: true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:33.684 | Jun 17, 2020 11:39:33 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC validateRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 2020-06-17 23:39:33.684 | INFO: Create Option - "DOMAIN_NAME"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:27.304 | Jun 17, 2020 11:39:27 PM com.calabrio.aws.lambda.function.ElasticsearchPublicWithFGAC handleRequest                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2020-06-17 23:39:27.304 | INFO: Custom resource request: CustomResourceRequest(RequestType=Create, StackId=arn:aws:cloudformation:us-east-1:022336407076:stack/Valentine-AES-PUBLIC-FGAC-Stack/b7d4cea0-b0f3-11ea-b865-0ac97ebd7097, RequestId=61e117b7-34d8-4547-863a-16f408abef32, ResponseURL=https://cloudformation-custom-resource-response-useast1.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3Aus-east-1%3A022336407076%3Astack/Valentine-AES-PUBLIC-FGAC-Stack/b7d4cea0-b0f3-11ea-b865-0ac97ebd7097%7CCustomElasticsearchDomain%7C61e117b7-34d8-4547-863a-16f408abef32?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20200617T233926Z&X-Amz-SignedHeaders=host&X-Amz-Expires=7200&X-Amz-Credential=AKIA6L7Q4OWT2CFW5GI6%2F20200617%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=c7c3826b433c09d691ebdd80ff1c89fb862d815445069e62f46cc17628d0cff6, ResourceType=Custom::ElasticsearchDomain, LogicalResourceId=CustomElasticsearchDomain, ResourceProperties={ServiceToken=arn:aws:lambda:us-east-1:022336407076:function:Valentine-AES-PUBLIC-FGAC-CustomElasticsearchDomai-11OHX7UV4M2YC, elasticsearchVersion=7.4, masterNodeCount=3, masterUserName=admin_, domainName=val-aes-public-fgac, ebsVolumeSize=20, availabilityZoneCount=3, masterInstanceType=r5.large.elasticsearch, masterUserPassword=Enjoyit2020$, dataNodeCount=3, dataInstanceType=r5.large.elasticsearch}, PhysicalResourceId=null, OldResourceProperties=null)                                                                                                                                                                              |
| 2020-06-17 23:39:27.250 | START RequestId: a2307192-c157-4588-80e6-80643aab2dd8 Version: $LATEST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
